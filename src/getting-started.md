# 事始め

他の多くのプログラミング分野とは異なり、組み込みシステムのソフトウェア開発には
特別なハードウェアが必要です。最低限必要なのは、ソフトウェアの開発対象となる
ターゲット・デバイスと、デバイスのプログラミングとデバッグを担当するデバッグ・
プローブです。多くの場合、特定のマイクロコントローラ・ユニット（MCU）向けに、
MCUとデバッグ・プローブ、いくつかのペリフェラルを組み込んだ開発ボードをベンダーは
提供しています。しかし、開発がプリント回路基板（PCB）のプロトタイピング段階に
達すると、外部プローブの使用が望ましくなります。市場には様々なデバッグプローブが
出回っています。中国製のクローンは数ドルで買えますが、オリジナルのプローブは
数百ドルすることも多いです。しかし、Droneがデフォルトでサポートしているユニークな
オプションがあります。[Black Magic Probe](http://black-magic.org/)です。

Black Magic Probe（BMP）は、RustやDroneのようなオープンソースのツールであり、
トラブルシューティングに非常に役立ちます。現在のところ、ターゲットとしてCortex-Mと
Cortex-Aをサポートしています。BMPはGDBプロトコルを直接実装しているので、
OpenOCD のような中間ソフトウェアが不要なことが良いところです。また、
USB-to-UARTコンバータも内蔵しています。公式のハードウェアは60ドル前後で販売
されており、きわめて良いものです。しかし、そのファームウェアは他のハードウェア
オプションにも対応しています。その中でも最も安価なものが
[Blue Pill](https://web.archive.org/web/20190524151648/wiki.stm32duino.com/index.php?title=Blue_Pill)です。

Blue Pillは、STM32F103C8T6マイコン用の超人気で格安の開発ボードです。
AliExpressで1.50ドル前後で購入でき、Droneでプログラミングすることも可能です。
最大72Mhzで動作する32ビットCortex-M3コア、20KbのRAM、[128 Kb](https://web.archive.org/web/20190524151648/wiki.stm32duino.com/index.php?title=Blue_Pill#128_KB_flash_on_C8_version)の
フラッシュメモリを搭載しています。これは多くのアプリケーションに適しており、
Droneを始めるにも十分です。したがって、最も安く始めるには、2枚のBlue Pill
ボードを買い、1枚はデバッグプローブとして、もう1枚はDroneプロジェクトのホストと
して使用することでしょう。

ただし、BMPファームウェアをBlue Pillにフラッシュするために必要なツールがもう
1つあります。USB-to-UARTアダプタです。購入時のBlue Pillにはファクトリーブート・
ローダがフラッシュされており、UARTを通じてフラッシュメモリにプログラム
することができます。これには、一番安いアダプタで十分です。CH340GはAliExpressで
およそ0.50ドルで購入できます。アダプタはBMPをブートストラップした後には不要です。
BMPは独自のUSB-to-UARTを持っているからです。ただし、予備のアダプタがあると
便利です。複数のUARTが必要なこともあるからです。
